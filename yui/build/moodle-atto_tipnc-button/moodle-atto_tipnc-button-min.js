YUI.add("moodle-atto_tipnc-button",function(e,t){var n="atto_tipnc",r="tipnc_flavor",i="atto_tipnc",s={INPUTSUBMIT:"atto_media_urlentrysubmit",INPUTCANCEL:"atto_media_urlentrycancel",FLAVORCONTROL:"flavorcontrol"},o={FLAVORCONTROL:".flavorcontrol"},u='<form class="atto_form"><div id="{{elementid}}_{{innerform}}" class="mdl-align"><label for="{{elementid}}_{{FLAVORCONTROL}}">{{get_string "enterflavor" component}}</label><input class="{{CSS.FLAVORCONTROL}}" id="{{elementid}}_{{FLAVORCONTROL}}"  name="{{elementid}}_{{FLAVORCONTROL}}" value="{{defaultflavor}}" /><button class="{{CSS.INPUTSUBMIT}}">{{get_string "insert" component}}</button></div></form>';e.namespace("M.atto_tipnc").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){if(this.get("disabled"))return;this.addButton({icon:"icon",iconComponent:"atto_tipnc",buttonName:"",callback:this._displayDialogue})},_getFlavorControlName:function(){return this.get("host").get("elementid")+"_"+r},_displayDialogue:function(t,r){t.preventDefault();var i=800,s=this.getDialogue({headerContent:M.util.get_string("dialogtitle",n),width:i+"px",focusAfterHide:r});s.width!==i+"px"&&s.set("width",i+"px");var o=this._getFormContent(r),u='<section class="atto_tipnc_desc">Copie la URL del archivo o carpeta a incustrar<ul>Siga los siguientes pasos: <li>Haga click en el bot\u00f3n "Compartir"</li><li>Haga click en "Link Interno"</li><li>Pegue m\u00e1s abajo la URL que se ha copiado</li></ul></section>',a=e.Node.create("<div>"+u+"</div>");a.append(o),s.set("bodyContent",a),s.show(),this.markUpdated()},_getFormContent:function(t){var i=e.Handlebars.compile(u),o=e.Node.create(i({elementid:this.get("host").get("elementid"),CSS:s,FLAVORCONTROL:r,component:n,defaultflavor:this.get("defaultflavor"),clickedicon:t}));return this._form=o,this._form.one("."+s.INPUTSUBMIT).on("click",this._doInsert,this),o},_doInsert:function(e){e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var t=this._form.one(o.FLAVORCONTROL);if(!t.get("value"))return;var n=t.get("value"),r='<iframe id="file_nextcloud_iframe" class="tipnc-iframe" src="'+n+'" width="100%" height="800px" align="top" frameborder="0"></iframe>';this.editor.focus(),this.get("host").insertContentAtFocusPoint(r),this.markUpdated()}},{ATTRS:{disabled:{value:!1},usercontextid:{value:null},defaultflavor:{value:""}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
