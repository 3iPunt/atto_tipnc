YUI.add("moodle-atto_tipnc-button",function(e,t){var n="atto_tipnc",r="tipnc_url",i="tipnc_size",s="atto_tipnc",o={INPUTSUBMIT:"atto_media_urlentrysubmit",INPUTCANCEL:"atto_media_urlentrycancel",URLCONTROL:"urlcontrol",SIZECONTROL:"sizecontrol"},u={URLCONTROL:".urlcontrol",SIZECONTROL:".sizecontrol"},a='<form class="atto_form"><div id="{{elementid}}_{{innerform}}" class="mdl-align"><label for="{{elementid}}_{{URLCONTROL}}">{{get_string "enterurl" component}}</label>: <input class="{{CSS.URLCONTROL}}" id="{{elementid}}_{{URLCONTROL}}"  name="{{elementid}}_{{URLCONTROL}}" value="{{defaulturl}}" /></br><label for="{{elementid}}_{{SIZECONTROL}}">{{get_string "entersize" component}}</label>: <input class="{{CSS.SIZECONTROL}}" id="{{elementid}}_{{SIZECONTROL}}"  name="{{elementid}}_{{SIZECONTROL}}" value="{{defaultsize}}" /></br><button class="{{CSS.INPUTSUBMIT}} btn btn-primary">{{get_string "insert" component}}</button></div></form>';e.namespace("M.atto_tipnc").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){if(this.get("disabled"))return;this.addButton({icon:"icon",iconComponent:"atto_tipnc",buttonName:"",callback:this._displayDialogue})},_getUrlControlName:function(){return this.get("host").get("elementid")+"_"+r},_displayDialogue:function(t,r){t.preventDefault();var i=900,s=this.getDialogue({headerContent:M.util.get_string("dialogtitle",n),width:i+"px",focusAfterHide:r});s.width!==i+"px"&&s.set("width",i+"px");var o=this._getFormContent(r),u=e.Node.create('<div id="atto_tipnc_content"></div>'),a=e.Node.create('<div id="atto_tipnc_desc"></div>');require(["atto_tipnc/body"],function(e){e.initBody()}),u.append(a),u.append(o),s.set("bodyContent",u),s.show(),this.markUpdated()},_getFormContent:function(t){var s=e.Handlebars.compile(a),u=e.Node.create(s({elementid:this.get("host").get("elementid"),CSS:o,URLCONTROL:r,SIZECONTROL:i,component:n,defaulturl:"",defaultsize:600,clickedicon:t}));return this._form=u,this._form.one("."+o.INPUTSUBMIT).on("click",this._doInsert,this),u},_doInsert:function(e){e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var t=this._form.one(u.URLCONTROL),r=this._form.one(u.SIZECONTROL);if(!t.get("value"))return;var i=t.get("value"),s="600";r.get("value")&&(s=r.get("value"));var o=M.util.get_string("url_button",n),a='<div class="atto_tipnc_iframe_set"><div id="file_url_button" data-region="file_url"><a href="'+i+'"  class="btn btn-sm btn-outline-secondary" target="_blank">'+o+"</a>"+"</div>";a+='<div class="hide_header"></div><iframe id="file_nextcloud_iframe" class="tipnc-iframe" src="'+i+'" width="100%" height="'+s+'px" '+'align="top" frameborder="0"></iframe>'+"</div>",this.editor.focus(),this.get("host").insertContentAtFocusPoint(a),this.markUpdated()}},{ATTRS:{disabled:{value:!1},usercontextid:{value:null},defaulturl:{value:""}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
