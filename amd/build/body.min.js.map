{"version":3,"sources":["../src/body.js"],"names":["define","$","Str","Ajax","Templates","SERVICES","BODY","TEMPLATES","Body","identifier","modeldialogue","css","request","methodname","args","call","done","response","template","render","html","append","fail","Notification","exception","stringsPromise","get_strings","key","component","when","then","strings","title","titlehtml","cont","each","$label","text","insert","content","show","prototype","node","initBody"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @author 2022 3iPunt <https://www.tresipunt.com/>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n\ndefine([\n        'jquery',\n        'core/str',\n        'core/ajax',\n        'core/templates'\n    ], function ($, Str, Ajax, Templates) {\n        \"use strict\";\n\n        /**\n         *\n         */\n        let SERVICES = {\n            BODY: 'atto_tipnc_get_body',\n        };\n\n        /**\n         *\n         */\n        let TEMPLATES = {\n            BODY: 'atto_tipnc/body_component'\n        };\n\n        /**\n         * @constructor\n         */\n        function Body() {\n\n            let identifier = $('#atto_tipnc_desc');\n\n            let modeldialogue = $('.moodle-dialogue');\n\n            modeldialogue.css('top', '70px');\n            modeldialogue.css('position', 'fixed');\n\n            let request = {\n                methodname: SERVICES.BODY,\n                args: {}\n            };\n\n            Ajax.call([request])[0].done(function(response) {\n                var template = TEMPLATES.BODY;\n                Templates.render(template, response).done(function(html) {\n                    identifier.append(html);\n                });\n            }).fail(Notification.exception);\n\n            var stringsPromise = Str.get_strings([\n                {\n                    key:        'dialogtitle',\n                    component:  'atto_tipnc'\n                },\n                {\n                    key:        'enterurl',\n                    component:  'atto_tipnc'\n                },\n                {\n                    key:        'entersize',\n                    component:  'atto_tipnc'\n                },\n                {\n                    key:        'insert',\n                    component:  'atto_tipnc'\n                }\n            ]);\n\n            $.when(stringsPromise).then(function(strings) {\n                let title = $('.moodle-dialogue-hd');\n                title.css('color', 'white');\n\n                let titlehtml = '<h2 id=\"atto_tipnc-title_modal_yui\">' + strings[0] + '</h2>';\n\n                let cont = $('.moodle-dialogue-base[aria-hidden=\"false\"] .moodle-dialogue-bd');\n\n                cont.append(titlehtml);\n\n                $('form.atto_form label').each(function(){\n                    let $label = $(this);\n                    if ($label.text() === '[[enterurl,atto_tipnc]]') {\n                        $label.text(strings[1]);\n                    }\n                    if ($label.text() === '[[entersize,atto_tipnc]]') {\n                        $label.text(strings[2]);\n                    }\n                });\n\n                let insert = $('.atto_media_urlentrysubmit');\n                insert.text(strings[3]);\n\n                let content = $('#atto_tipnc_content');\n                content.show();\n                content.css('display', 'flex');\n\n            }).fail(Notification.exception);\n\n        }\n\n        /** @type {jQuery} The jQuery node for the region. */\n        Body.prototype.node = null;\n\n        return {\n            /**\n             *\n             * @return {Body}\n             */\n            initBody: function () {\n                return new Body();\n            }\n        };\n    }\n);"],"file":"body.min.js"}